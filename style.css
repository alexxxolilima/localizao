:root{
  --brand-primary:#106fa4;
  --brand-secondary:#072b57;
  --accent:#38bdf8;
  --bg:#071228;
  --card-bg: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  --card-bg-solid: #07182a;
  --glass: rgba(255,255,255,0.03);
  --muted:#9fb6d0;
  --text:#e6eef8;
  --danger:#ff6b6b;
  --ok:#22c55e;
  --radius:14px;
  --shadow-md: 0 12px 30px rgba(2,6,23,0.5);
  --shadow-lg: 0 40px 100px rgba(2,6,23,0.75);
  --transition-fast:160ms cubic-bezier(.2,.9,.3,1);
  --transition-smooth:350ms cubic-bezier(.2,.9,.3,1);
  --max-width:1200px;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue";background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
.app{max-width:var(--max-width);margin:28px auto;padding:20px}
.hidden{display:none!important}
.muted{color:var(--muted)}
.small{font-size:13px}

header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
.company-logo{width:56px;height:56px;border-radius:12px;object-fit:cover;background:linear-gradient(180deg,var(--brand-primary),var(--brand-secondary));border:2px solid rgba(255,255,255,0.04);box-shadow:var(--shadow-md)}
.app-title{font-weight:800;font-size:20px}
.brand{color:var(--accent);font-weight:800}

.card{background:var(--card-bg);border-radius:var(--radius);padding:16px;border:1px solid rgba(255,255,255,0.03);box-shadow:var(--shadow-md);transition:transform var(--transition-smooth)}
.dropzone{display:flex;align-items:center;gap:16px;padding:12px;border-radius:12px;border:1px dashed rgba(255,255,255,0.03);cursor:pointer;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);transition:all var(--transition-fast)}
.dropzone:hover{transform:translateY(-4px);box-shadow:0 22px 60px rgba(2,6,23,0.55)}
.dropzone.dragover{border-color:var(--accent);background:rgba(56,189,248,0.03);transform:scale(1.01) translateY(-2px)}
#fileName{color:var(--muted);font-size:13px;max-width:48ch;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;border:0;transition:transform var(--transition-fast),box-shadow var(--transition-fast),opacity var(--transition-fast)}
.btn-primary{background:linear-gradient(90deg,var(--brand-primary),var(--brand-secondary));color:#fff;box-shadow:0 10px 28px rgba(16,111,164,0.12)}
.btn-primary:active{transform:translateY(1px)}
.btn-primary:disabled{opacity:.6;cursor:not-allowed}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit;padding:8px 12px;border-radius:10px}

.input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:var(--text);transition:box-shadow var(--transition-smooth)}
.input:focus{outline:none;box-shadow:0 12px 30px rgba(16,111,164,0.12);transform:translateY(-2px)}

.progress-track{background:rgba(255,255,255,0.03);height:8px;border-radius:8px;overflow:hidden;margin-bottom:6px}
.progress-bar{height:100%;width:0%;background:linear-gradient(90deg,var(--brand-primary),var(--accent));transition:width 140ms linear}

.grid{display:grid;gap:18px;grid-template-columns:1fr;margin-top:20px}
@media(min-width:780px){.grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:1200px){.grid{grid-template-columns:repeat(3,1fr)}}

.result{
  display:flex;
  flex-direction:column;
  gap:10px;
  position:relative;
  border-radius:12px;
  padding:16px;
  background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  border:1px solid rgba(255,255,255,0.02);
  transition:transform .28s cubic-bezier(.2,.9,.25,1),box-shadow .28s,border-color .28s;
  cursor:pointer;
  overflow:visible;
  will-change:transform;
}

.card-header{
  display:flex;
  gap:12px;
  align-items:flex-start;
  justify-content:space-between;
  width:100%;
}
.chip {
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.03);
  color:var(--muted);
  font-family:monospace;
  font-size:12px;
}

.card-title { display:flex; flex-direction:column; gap:6px; min-width:0; } /* min-width:0 for text truncation to work */
.card-title h3 { margin:0; font-size:16px; font-weight:900; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.card-title .sub { color:var(--muted); font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

.card-meta { text-align:right; color:var(--muted); font-size:13px; min-width:80px }

.address { color:var(--muted); font-size:13px; line-height:1.3; }

.actions {
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
}

.copy-feedback {
  background:#e9f6ff; color:#000; padding:6px 8px; border-radius:8px; font-weight:800;
  display:inline-block; transform:translateY(-6px); opacity:0; transition:opacity .18s, transform .18s;
}
.copy-feedback.show { transform:none; opacity:1; }

.badge{display:inline-flex;gap:6px;align-items:center;background:linear-gradient(90deg,#ff8a8a,#ff6b6b);color:white;padding:6px 10px;border-radius:999px;font-weight:800}
.result.no-address{border:2px solid var(--danger);box-shadow:0 18px 50px rgba(255,80,80,0.06);}

.result--expanded{
  position:fixed !important;
  left:50% !important;
  top:50% !important;
  transform:translate(-50%,-50%) scale(1) !important;
  width:min(980px,96%) !important;
  z-index:99999 !important;
  padding:22px !important;
  border-radius:18px !important;
  background: var(--card-bg-solid) !important;
  border:1px solid rgba(255,255,255,0.06) !important;
  box-shadow: var(--shadow-lg) !important;
  max-height: 90vh !important;
  overflow: auto !important;
  -webkit-overflow-scrolling: touch;
  animation: popIn .26s cubic-bezier(.2,.9,.3,1) both;
}

.expanded-close {
  position: absolute;
  right: 12px;
  top: 12px;
  z-index: 100000;
  border: 0;
  background: rgba(255,255,255,0.04);
  color: var(--text);
  padding: 8px 10px;
  border-radius: 8px;
  cursor: pointer;
}

.overlay-dim{position:fixed;inset:0;background:rgba(2,6,23,0.64);backdrop-filter:blur(4px);z-index:99998;display:block}
.overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:99990}
.overlay.hidden{display:none}
.modal{background:var(--card-bg);color:var(--text);border-radius:12px;padding:14px;width:min(920px,96%);box-shadow:var(--shadow-md);border:1px solid rgba(255,255,255,0.06)}
.close-btn{border:1px solid rgba(255,255,255,0.06);background:transparent;padding:8px 10px;border-radius:8px;cursor:pointer}

.skeleton{background:linear-gradient(90deg,rgba(255,255,255,0.02),rgba(255,255,255,0.04),rgba(255,255,255,0.02));background-size:200% 100%;animation:shimmer 1.2s infinite linear;border-radius:8px}
@keyframes shimmer{from{background-position:-200% 0}to{background-position:200% 0}}
.loader{width:44px;height:44px;border-radius:999px;border:4px solid rgba(255,255,255,0.06);border-top-color:var(--accent);animation:spin 800ms linear infinite;box-shadow:0 6px 24px rgba(0,0,0,0.35)}
@keyframes spin{to{transform:rotate(360deg)}}

@media(max-width:760px){
  .company-logo{width:48px;height:48px}
  .result{padding:12px}
  .btn{padding:8px 10px}
  .result--expanded{width:calc(100% - 32px) !important}
}

.result:focus{outline:3px solid rgba(56,189,248,0.12);outline-offset:6px}


